import{j as e,n as pe,c as q,w as ue,x as ve,d as le,i as ie,g as oe,r as x,l as ne,S as ce,y as de,z as me,L as he,D as je,B as Ne,a as Se,F as Ce,T as ke,b as Te}from"./react-vendor-BKkFPE2a.js";import{a as Ie,u as Me}from"./index-BWakVz_d.js";import{A as Z}from"./Alert-z41paNou.js";import{f as E,a as V,c as G,C as K}from"./Card-DwLTxh2g.js";import"./vendor-BmYUbuLR.js";const Ee="/api",Be=d=>{switch(d.toLowerCase()){case"steam":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-steam)"};case"epic":case"epicgames":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-epic)"};case"origin":case"ea":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-origin)"};case"blizzard":case"battle.net":case"battlenet":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-blizzard)"};case"wsus":case"windows":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-wsus)"};case"riot":case"riotgames":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-riot)"};default:return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-text-secondary)"}}},De={multipleDownloads:"Multiple Downloads",singleDownloads:"Single Downloads",individual:"Individual Downloads",banner:"Game Banner",downloadList:"Download Sessions"},Le=({items:d,expandedItem:j,onItemClick:C,sectionLabels:B,aestheticMode:I=!1})=>{const f={...De,...B},y=t=>{const m=j===t.id,u=t.totalBytes>0?t.cacheHitBytes/t.totalBytes*100:0,l=t.downloads[0],N=t.type==="game"&&t.service.toLowerCase()==="steam"&&(l==null?void 0:l.gameAppId)&&(l==null?void 0:l.gameName)&&l.gameName!=="Unknown Steam Game"&&!l.gameName.match(/^Steam App \d+$/),o=N&&(l!=null&&l.gameAppId)?`https://store.steampowered.com/app/${l.gameAppId}`:null;return e.jsxs("div",{className:`transition-all duration-300 ease-in-out ${m?"bg-[var(--theme-bg-tertiary)]/10 shadow-sm":"hover:bg-[var(--theme-bg-tertiary)]/5"}`,style:{animation:"gentleFadeIn 0.3s ease-out"},children:[e.jsxs("button",{type:"button",onClick:()=>C(t.id),className:"w-full text-left px-3 py-2 flex items-center gap-3 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--theme-primary)] transition-all duration-200",children:[e.jsx(q,{size:14,className:`flex-shrink-0 text-[var(--theme-text-secondary)] transition-transform duration-300 ease-in-out ${m?"rotate-90":""}`}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold rounded",style:Be(t.service),children:t.service.toUpperCase()}),e.jsx("span",{className:"text-base font-medium text-[var(--theme-text-primary)] truncate",children:t.name}),e.jsxs("span",{className:"text-sm text-themed-muted",children:[t.count," download",t.count!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsx("span",{className:"text-base font-semibold text-[var(--theme-text-primary)] font-mono text-right min-w-[80px]",children:E(t.totalBytes)}),t.cacheHitBytes>0?e.jsx("span",{className:"cache-hit font-medium text-sm font-mono text-right min-w-[50px]",children:V(u)}):e.jsx("span",{className:"font-medium text-sm font-mono text-right min-w-[50px]",style:{color:"var(--theme-error-text)"},children:"0%"}),e.jsxs("span",{className:"text-sm text-themed-muted font-mono text-right min-w-[70px]",children:[t.clientsSet.size," clients"]})]})]}),m&&e.jsx("div",{className:"px-4 pb-3 pt-2 border-t overflow-hidden",style:{borderColor:"var(--theme-border-secondary)",animation:"expandDown 0.3s ease-out",transformOrigin:"top"},onClick:h=>h.stopPropagation(),children:e.jsxs("div",{className:"flex flex-col gap-3",style:{animation:"slideUp 0.3s ease-out 0.1s both"},children:[N&&(l==null?void 0:l.gameAppId)&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-themed-muted",children:I?"Game Icon":f.banner}),I?e.jsx("div",{className:"w-full sm:w-[240px] h-[110px] sm:h-[120px] rounded-lg border flex items-center justify-center",style:{backgroundColor:"var(--theme-bg-tertiary)",borderColor:"var(--theme-border-primary)"},children:e.jsx(ue,{size:48,style:{color:"var(--theme-primary)",opacity:"0.6"}})}):e.jsx("img",{src:`${Ee}/gameimages/${l.gameAppId}/header/`,alt:l.gameName||t.name,className:"w-full sm:w-[240px] h-[110px] sm:h-[120px] rounded-lg object-cover",loading:"lazy"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-themed-muted",children:[e.jsxs("span",{children:["Cache Hit: ",t.cacheHitBytes>0?E(t.cacheHitBytes):"None"]}),e.jsxs("span",{children:["Miss: ",E(t.cacheMissBytes||0)]}),u>0&&e.jsxs("span",{children:["Efficiency: ",V(u)]}),e.jsxs("span",{children:["First: ",G(t.firstSeen)]}),e.jsxs("span",{children:["Last: ",G(t.lastSeen)]}),o&&e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:h=>h.stopPropagation(),className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded text-[var(--theme-primary)] hover:text-[var(--theme-primary-hover)] hover:bg-[var(--theme-primary)]/10 transition-all duration-200 font-medium border border-transparent hover:border-[var(--theme-primary)]/20",title:"View in Steam Store",children:[e.jsx(ve,{size:12}),e.jsx("span",{children:"Store"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-themed-muted",children:[f.downloadList," (",t.downloads.length>100?`Showing 100 of ${t.downloads.length}`:t.downloads.length,")"]}),t.downloads.sort((h,S)=>new Date(S.startTime).getTime()-new Date(h.startTime).getTime()).slice(0,100).map(h=>{const S=h.totalBytes||0,s=S>0?(h.cacheHitBytes||0)/S*100:0;return e.jsxs("div",{className:"flex items-center justify-between text-xs py-0.5 hover:bg-[var(--theme-bg-tertiary)]/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-[var(--theme-text-primary)]",children:h.clientIp}),e.jsx("span",{className:"text-themed-muted",children:G(h.startTime)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium text-[var(--theme-text-primary)] font-mono text-right min-w-[70px]",children:E(S)}),h.cacheHitBytes>0?e.jsx("span",{className:"cache-hit font-medium font-mono text-right min-w-[45px]",children:V(s)}):e.jsx("span",{className:"font-medium font-mono text-right min-w-[45px]",style:{color:"var(--theme-error-text)"},children:"0%"})]})]},h.id)})]})]})})]},t.id)},P=t=>{const m=t.totalBytes||0,u={id:`individual-${t.id}`,name:t.gameName||"Unknown Game",type:"game",service:t.service,downloads:[t],totalBytes:m,cacheHitBytes:t.cacheHitBytes||0,cacheMissBytes:t.cacheMissBytes||0,clientsSet:new Set([t.clientIp]),firstSeen:t.startTime,lastSeen:t.startTime,count:1};return y(u)};let k=!1,D=!1,H=!1;return e.jsxs("div",{className:"space-y-2",style:{animation:"gentleFadeIn 0.4s ease-out"},children:[e.jsx("div",{className:"px-3 py-2 text-sm font-semibold text-themed-primary",style:{animation:"slideUp 0.3s ease-out"},children:"Downloads Overview"}),e.jsx("div",{className:"transition-all duration-300",children:d.map(t=>{const m="downloads"in t,u=m?t.id:`download-${t.id}`;let l=null;if(m){const N=t;N.count>1&&!k?(k=!0,l=e.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-themed-primary uppercase tracking-wide",children:f.multipleDownloads})):N.count===1&&!D&&(D=!0,l=e.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-themed-primary uppercase tracking-wide",children:f.singleDownloads}))}else!m&&!H&&(H=!0,l=e.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-themed-primary uppercase tracking-wide",children:f.individual}));return e.jsxs(pe.Fragment,{children:[l,m?y(t):P(t)]},u)})})]})},_e="/api",xe=d=>{switch(d.toLowerCase()){case"steam":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-steam)"};case"epic":case"epicgames":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-epic)"};case"origin":case"ea":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-origin)"};case"blizzard":case"battle.net":case"battlenet":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-blizzard)"};case"wsus":case"windows":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-wsus)"};case"riot":case"riotgames":return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-riot)"};default:return{backgroundColor:"var(--theme-bg-tertiary)",color:"var(--theme-text-secondary)"}}},Pe={multipleDownloads:"Multiple Downloads",singleDownloads:"Single Downloads",individual:"Individual Downloads"},z=({label:d,value:j,highlight:C})=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-sm text-themed-muted",children:d}),e.jsx("span",{className:`text-sm font-medium ${C?"text-themed-primary":"text-[var(--theme-text-primary)]"}`,children:j})]}),Ae=({items:d,expandedItem:j,onItemClick:C,sectionLabels:B,aestheticMode:I=!1})=>{const f={...Pe,...B},y=t=>{const m=t.totalBytes||0,u={id:`individual-${t.id}`,name:t.gameName||"Unknown Game",type:"game",service:t.service,downloads:[t],totalBytes:m,cacheHitBytes:t.cacheHitBytes||0,cacheMissBytes:t.cacheMissBytes||0,clientsSet:new Set([t.clientIp]),firstSeen:t.startTime,lastSeen:t.startTime,count:1};return P(u)},P=t=>{const m=j===t.id,u=t.totalBytes>0?t.cacheHitBytes/t.totalBytes*100:0,l=t.downloads[0],N=t.type==="game"&&t.service.toLowerCase()==="steam"&&(l==null?void 0:l.gameAppId)&&(l==null?void 0:l.gameName)&&l.gameName!=="Unknown Steam Game"&&!l.gameName.match(/^Steam App \d+$/),o=N&&(l!=null&&l.gameAppId)?`https://store.steampowered.com/app/${l.gameAppId}`:null;return e.jsxs("div",{className:`rounded-xl border bg-[var(--theme-bg-secondary)] shadow-sm transition-all duration-300 overflow-hidden ${m?"border-[var(--theme-primary)]/70 shadow-xl":"hover:shadow-xl"}`,style:{borderColor:"var(--theme-border-primary)"},children:[e.jsx("button",{type:"button",onClick:()=>C(t.id),className:"w-full text-left focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--theme-primary)]",children:e.jsxs("div",{className:"flex items-center",children:[N&&(l==null?void 0:l.gameAppId)&&e.jsx("div",{className:"flex-shrink-0",children:I?e.jsx("div",{className:"w-[230px] h-[107px] flex items-center justify-center rounded-lg border",style:{backgroundColor:"var(--theme-bg-tertiary)",borderColor:"var(--theme-border-primary)"},children:e.jsx(ue,{size:48,style:{color:"var(--theme-primary)",opacity:"0.6"}})}):e.jsx("img",{src:`${_e}/gameimages/${l.gameAppId}/header/`,alt:l.gameName||t.name,className:"w-[230px] h-[107px] object-cover",loading:"lazy"})}),e.jsx("div",{className:"flex-1 px-4 py-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(q,{size:14,className:`mt-0.5 text-[var(--theme-text-secondary)] transition-transform flex-shrink-0 ${m?"rotate-90":""}`}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold rounded",style:xe(t.service),children:t.service.toUpperCase()}),e.jsx("h3",{className:"text-base font-semibold text-[var(--theme-text-primary)]",children:t.name}),e.jsxs("span",{className:"text-xs text-themed-muted",children:[t.count," download",t.count!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-themed-muted",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(le,{size:10}),G(t.lastSeen)]}),e.jsx("span",{children:"Total Size"}),e.jsx("span",{className:"font-semibold text-[var(--theme-text-primary)]",children:E(t.totalBytes)}),e.jsx("span",{children:"Clients"}),e.jsx("span",{className:"font-semibold text-[var(--theme-text-primary)]",children:t.clientsSet.size})]}),t.cacheHitBytes>0&&e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsx("span",{children:"Cache Hit"}),e.jsx("span",{className:"cache-hit font-semibold",children:V(u)}),e.jsx("span",{children:"Saved"}),e.jsx("span",{className:"font-semibold text-[var(--theme-success-text)]",children:E(t.cacheHitBytes)})]})]})]})})})]})}),m&&e.jsx("div",{className:"border-t bg-[var(--theme-bg-secondary)]/70 px-5 pb-5 pt-4 overflow-hidden",style:{borderColor:"var(--theme-border-primary)",animation:"expandDown 0.4s ease-out",transformOrigin:"top"},onClick:h=>h.stopPropagation(),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:e.jsx("span",{className:"px-3 py-1 font-bold rounded shadow-sm",style:xe(t.service),children:t.service.toUpperCase()})}),o&&e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded text-[var(--theme-primary)] hover:text-[var(--theme-primary-hover)] hover:bg-[var(--theme-primary)]/10 transition-all duration-200 font-medium border border-transparent hover:border-[var(--theme-primary)]/20",title:"View in Steam Store",children:[e.jsx(ve,{size:16}),e.jsx("span",{children:"Store Page"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-themed-primary uppercase tracking-wide",children:"Cache Performance"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{label:"Total Size",value:E(t.totalBytes),highlight:!0}),e.jsx(z,{label:"Cache Hit",value:t.cacheHitBytes>0?E(t.cacheHitBytes):"No cache hits yet",highlight:t.cacheHitBytes>0}),e.jsx(z,{label:"Cache Miss",value:E(t.cacheMissBytes||0)}),e.jsx(z,{label:"Cache Efficiency",value:u>0?V(u):"N/A",highlight:u>0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-themed-primary uppercase tracking-wide",children:"Activity"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{label:`Download${t.count!==1?"s":""}`,value:t.count}),e.jsx(z,{label:"Unique Clients",value:t.clientsSet.size}),e.jsx(z,{label:"First Seen",value:G(t.firstSeen)}),e.jsx(z,{label:"Last Seen",value:G(t.lastSeen)})]})]})]}),e.jsx("div",{className:"rounded-lg border bg-[var(--theme-bg-tertiary)]/40 px-4 py-3 text-xs text-themed-muted",style:{borderColor:"var(--theme-border-primary)"},children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 text-[var(--theme-success-text)]",children:[e.jsx(ie,{size:14}),t.cacheHitBytes>0?`${E(t.cacheHitBytes)} served from cache`:"No cache hits yet"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(oe,{size:14,className:"text-[var(--theme-text-secondary)]"}),E(t.cacheMissBytes||0)," fetched from origin"]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-semibold text-themed-primary uppercase tracking-wide",children:"Download Sessions"}),e.jsxs("span",{className:"text-xs text-themed-muted bg-[var(--theme-bg-tertiary)] px-2 py-1 rounded-full",children:[t.downloads.length," ",t.downloads.length!==1?"entries":"entry"]})]}),e.jsx("div",{className:"space-y-2",children:t.downloads.map(h=>{const S=h.totalBytes||0,s=S>0?(h.cacheHitBytes||0)/S*100:0;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 px-4 py-3 rounded-lg border hover:bg-[var(--theme-bg-tertiary)]/20 transition-colors",style:{borderColor:"var(--theme-border-secondary)"},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-mono text-sm text-[var(--theme-text-primary)] bg-[var(--theme-bg-tertiary)] px-2 py-1 rounded",children:h.clientIp}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-themed-muted",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{size:12}),"Started ",G(h.startTime)]}),h.endTime&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:12}),"Finished ",G(h.endTime)]}),!h.endTime&&e.jsxs("span",{className:"flex items-center gap-1 text-[var(--theme-info-text)]",children:[e.jsx(oe,{size:12}),"In progress"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"font-semibold text-[var(--theme-text-primary)]",children:E(S)}),h.cacheHitBytes>0?e.jsx("span",{className:"cache-hit font-semibold text-xs px-2 py-1 rounded-full bg-[var(--theme-success-bg)] text-[var(--theme-success-text)]",children:V(s)}):e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-[var(--theme-bg-tertiary)] text-themed-muted",children:"No cache"})]})]},h.id)})})]})]})})]},t.id)};let k=!1,D=!1,H=!1;return e.jsx("div",{className:"space-y-4",children:d.map(t=>{const m="downloads"in t,u=m?t.id:`download-${t.id}`;let l=null;if(m){const N=t;N.count>1&&!k?(k=!0,l=e.jsx("div",{className:"mb-4 mt-6 first:mt-0",children:e.jsx("h2",{className:"text-lg font-semibold text-themed-primary border-b pb-2",style:{borderColor:"var(--theme-border-secondary)"},children:f.multipleDownloads})})):N.count===1&&!D&&(D=!0,l=e.jsx("div",{className:"mb-4 mt-6 first:mt-0",children:e.jsx("h2",{className:"text-lg font-semibold text-themed-primary border-b pb-2",style:{borderColor:"var(--theme-border-secondary)"},children:f.singleDownloads})}))}else!m&&!H&&(H=!0,l=e.jsx("div",{className:"mb-4 mt-6 first:mt-0",children:e.jsx("h2",{className:"text-lg font-semibold text-themed-primary border-b pb-2",style:{borderColor:"var(--theme-border-secondary)"},children:f.individual})}));return e.jsxs(pe.Fragment,{children:[l,m?P(t):y(t)]},u)})})},b={SERVICE_FILTER:"lancache_downloads_service",ITEMS_PER_PAGE:"lancache_downloads_items",SHOW_METADATA:"lancache_downloads_metadata",SHOW_SMALL_FILES:"lancache_downloads_show_small",HIDE_LOCALHOST:"lancache_downloads_hide_localhost",HIDE_UNKNOWN_GAMES:"lancache_downloads_hide_unknown",VIEW_MODE:"lancache_downloads_view_mode",SORT_ORDER:"lancache_downloads_sort_order",AESTHETIC_MODE:"lancache_downloads_aesthetic_mode"},J=({options:d,value:j,onChange:C,placeholder:B="Select option",className:I=""})=>{const[f,y]=x.useState(!1),P=x.useRef(null),k=x.useRef(null),D=d.find(t=>t.value===j);x.useEffect(()=>{const t=u=>{P.current&&!P.current.contains(u.target)&&k.current&&!k.current.contains(u.target)&&y(!1)},m=u=>{u.key==="Escape"&&y(!1)};if(f)return document.addEventListener("mousedown",t),document.addEventListener("keydown",m),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",m)}},[f]);const H=t=>{C(t),y(!1)};return e.jsxs("div",{className:`relative ${I}`,children:[e.jsxs("button",{ref:k,type:"button",onClick:()=>y(!f),className:"w-full px-3 py-2 rounded-lg border text-[var(--theme-text-primary)] text-left focus:outline-none transition-colors flex items-center justify-between",style:{backgroundColor:"var(--theme-bg-secondary)",borderColor:"var(--theme-border-primary)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="var(--theme-bg-tertiary)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="var(--theme-bg-secondary)",children:[e.jsx("span",{className:"truncate",children:D?D.label:B}),e.jsx(Te,{size:16,className:`transition-transform ${f?"rotate-180":""}`})]}),f&&e.jsx("div",{ref:P,className:"absolute mt-1 w-full rounded-lg border shadow-xl z-[9999]",style:{backgroundColor:"var(--theme-bg-secondary)",borderColor:"var(--theme-border-primary)",maxHeight:"300px",overflowY:"auto"},children:e.jsx("div",{className:"py-1",children:d.map(t=>e.jsx("button",{type:"button",onClick:()=>H(t.value),className:`w-full px-4 py-2 text-left text-sm hover:bg-[var(--theme-bg-tertiary)] transition-colors ${t.value===j?"bg-[var(--theme-bg-tertiary)] text-[var(--theme-text-primary)]":"text-[var(--theme-text-secondary)]"}`,children:t.label},t.value))})})]})},Oe=d=>{if(!d||d.length===0)return"";const j=["id","service","clientIp","startTime","endTime","cacheHitBytes","cacheMissBytes","totalBytes","cacheHitPercent","isActive","gameName","gameAppId"],C=j.join(","),B=d.map(I=>j.map(f=>{const y=I[f];return y==null?"":typeof y=="string"&&y.includes(",")?`"${y.replace(/"/g,'""')}"`:y}).join(","));return[C,...B].join(`
`)},Ve=()=>{const{latestDownloads:d=[],loading:j,mockMode:C,updateMockDataCount:B,updateApiDownloadCount:I}=Ie(),{timeRange:f}=Me(),[y,P]=x.useState(null),[k,D]=x.useState(!1),[H,t]=x.useState(!1),[m,u]=x.useState(!1),[l,N]=x.useState(!1),[o,h]=x.useState(1),S=x.useRef(null),[s,M]=x.useState(()=>({showZeroBytes:localStorage.getItem(b.SHOW_METADATA)==="true",showSmallFiles:localStorage.getItem(b.SHOW_SMALL_FILES)!=="false",hideLocalhost:localStorage.getItem(b.HIDE_LOCALHOST)==="true",hideUnknownGames:localStorage.getItem(b.HIDE_UNKNOWN_GAMES)==="true",selectedService:localStorage.getItem(b.SERVICE_FILTER)||"all",itemsPerPage:localStorage.getItem(b.ITEMS_PER_PAGE)==="unlimited"?"unlimited":parseInt(localStorage.getItem(b.ITEMS_PER_PAGE)||"50"),viewMode:localStorage.getItem(b.VIEW_MODE)||"normal",sortOrder:localStorage.getItem(b.SORT_ORDER)||"latest",aestheticMode:localStorage.getItem(b.AESTHETIC_MODE)==="true"}));x.useEffect(()=>{localStorage.setItem(b.SHOW_METADATA,s.showZeroBytes.toString()),localStorage.setItem(b.SHOW_SMALL_FILES,s.showSmallFiles.toString()),localStorage.setItem(b.HIDE_LOCALHOST,s.hideLocalhost.toString()),localStorage.setItem(b.HIDE_UNKNOWN_GAMES,s.hideUnknownGames.toString()),localStorage.setItem(b.SERVICE_FILTER,s.selectedService),localStorage.setItem(b.ITEMS_PER_PAGE,s.itemsPerPage.toString()),localStorage.setItem(b.VIEW_MODE,s.viewMode),localStorage.setItem(b.SORT_ORDER,s.sortOrder),localStorage.setItem(b.AESTHETIC_MODE,s.aestheticMode.toString())},[s]),x.useEffect(()=>{C&&B?B("unlimited"):!C&&I&&I("unlimited")},[C,B,I]),x.useEffect(()=>{if(!j&&d.length>0){t(!0);const a=setTimeout(()=>{t(!1)},300);return()=>clearTimeout(a)}},[s.selectedService,s.sortOrder,s.showZeroBytes,s.showSmallFiles,s.hideLocalhost,s.hideUnknownGames,s.viewMode]);const Y=x.useMemo(()=>{const a=new Set(d.map(r=>r.service.toLowerCase()));return Array.from(a).sort()},[d]),ge=x.useMemo(()=>[{value:"all",label:"All Services"},...Y.map(a=>({value:a,label:a.charAt(0).toUpperCase()+a.slice(1)}))],[Y]),ye=x.useMemo(()=>[{value:"20",label:"20 groups"},{value:"50",label:"50 groups"},{value:"100",label:"100 groups"},{value:"200",label:"200 groups"},{value:"unlimited",label:"Show All"}],[]),A=x.useMemo(()=>{if(!Array.isArray(d))return console.error("latestDownloads is not an array:",d),[];let a=[...d];return s.showZeroBytes||(a=a.filter(r=>(r.totalBytes||0)>0)),s.showSmallFiles||(a=a.filter(r=>(r.totalBytes||0)===0||(r.totalBytes||0)>=1048576)),s.hideLocalhost&&(a=a.filter(r=>r.clientIp!=="127.0.0.1"&&r.clientIp!=="::1")),s.hideUnknownGames&&(a=a.filter(r=>r.gameName?!(r.gameName==="Unknown Steam Game"||r.gameName.match(/^Steam App \d+$/)):!0)),s.selectedService!=="all"&&(a=a.filter(r=>r.service.toLowerCase()===s.selectedService)),a},[d,s.showZeroBytes,s.showSmallFiles,s.hideLocalhost,s.hideUnknownGames,s.selectedService]),Q=x.useMemo(()=>Array.isArray(d)?s.selectedService==="all"?d:d.filter(a=>a.service.toLowerCase()===s.selectedService):[],[d,s.selectedService]),X=a=>{const r={},p=[];return a.forEach(i=>{let c,w,n;if(i.gameName&&i.gameName!=="Unknown Steam Game"&&!i.gameName.match(/^Steam App \d+$/))c=`game-${i.gameName}`,w=i.gameName,n="game";else if(i.gameName&&i.gameName.match(/^Steam App \d+$/))c="unmapped-steam-apps",w="Unmapped Steam Apps",n="content";else if(i.service.toLowerCase()!=="steam")c=`service-${i.service.toLowerCase()}`,w=`${i.service} Downloads`,n=i.totalBytes===0?"metadata":"content";else{p.push(i);return}r[c]||(r[c]={id:c,name:w,type:n,service:i.service,downloads:[],totalBytes:0,cacheHitBytes:0,cacheMissBytes:0,clientsSet:new Set,firstSeen:i.startTime,lastSeen:i.startTime,count:0}),r[c].downloads.push(i),r[c].totalBytes+=i.totalBytes||0,r[c].cacheHitBytes+=i.cacheHitBytes||0,r[c].cacheMissBytes+=i.cacheMissBytes||0,r[c].clientsSet.add(i.clientIp),r[c].count++,i.startTime<r[c].firstSeen&&(r[c].firstSeen=i.startTime),i.startTime>r[c].lastSeen&&(r[c].lastSeen=i.startTime)}),{groups:Object.values(r),individuals:p}},ee=x.useMemo(()=>{if(s.viewMode!=="normal")return[];const{groups:a,individuals:r}=X(A);return[...a,...r].sort((i,c)=>{const w="downloads"in i&&i.downloads.length>1,n="downloads"in c&&c.downloads.length>1;if(w&&!n)return-1;if(!w&&n)return 1;const v="downloads"in i&&i.downloads.length===1,O="downloads"in c&&c.downloads.length===1;if(v&&!O&&!n)return-1;if(!v&&O&&!w)return 1;const L="downloads"in i?Math.max(...i.downloads.map(T=>new Date(T.startTime).getTime())):new Date(i.startTime).getTime();return("downloads"in c?Math.max(...c.downloads.map(T=>new Date(T.startTime).getTime())):new Date(c.startTime).getTime())-L})},[A,s.viewMode]),te=x.useMemo(()=>{if(s.viewMode!=="compact")return[];const{groups:a,individuals:r}=X(A);return[...a,...r].sort((i,c)=>{const w="downloads"in i&&i.downloads.length>1,n="downloads"in c&&c.downloads.length>1;if(w&&!n)return-1;if(!w&&n)return 1;const v="downloads"in i&&i.downloads.length===1,O="downloads"in c&&c.downloads.length===1;if(v&&!O&&!n)return-1;if(!v&&O&&!w)return 1;const L="downloads"in i?Math.max(...i.downloads.map(T=>new Date(T.startTime).getTime())):new Date(i.startTime).getTime();return("downloads"in c?Math.max(...c.downloads.map(T=>new Date(T.startTime).getTime())):new Date(c.startTime).getTime())-L})},[A,s.viewMode]),$=x.useMemo(()=>{let a=s.viewMode==="normal"?ee:s.viewMode==="compact"?te:A;if(s.viewMode==="normal"||s.viewMode==="compact"){const r=[...a],p=r.filter(n=>"downloads"in n&&n.downloads.length>1),i=r.filter(n=>"downloads"in n&&n.downloads.length===1),c=r.filter(n=>!("downloads"in n)),w=(n,v)=>{switch(s.sortOrder){case"oldest":const O="downloads"in n?Math.min(...n.downloads.map(_=>new Date(_.startTime).getTime())):new Date(n.startTime).getTime(),L="downloads"in v?Math.min(...v.downloads.map(_=>new Date(_.startTime).getTime())):new Date(v.startTime).getTime();return O-L;case"largest":const U="downloads"in n?n.totalBytes:n.totalBytes||0;return("downloads"in v?v.totalBytes:v.totalBytes||0)-U;case"smallest":const W="downloads"in n?n.totalBytes:n.totalBytes||0,fe="downloads"in v?v.totalBytes:v.totalBytes||0;return W-fe;case"service":const re=n.service.localeCompare(v.service);if(re!==0)return re;const be="downloads"in n?Math.max(...n.downloads.map(_=>new Date(_.startTime).getTime())):new Date(n.startTime).getTime();return("downloads"in v?Math.max(...v.downloads.map(_=>new Date(_.startTime).getTime())):new Date(v.startTime).getTime())-be;case"latest":default:const we="downloads"in n?Math.max(...n.downloads.map(_=>new Date(_.startTime).getTime())):new Date(n.startTime).getTime();return("downloads"in v?Math.max(...v.downloads.map(_=>new Date(_.startTime).getTime())):new Date(v.startTime).getTime())-we}};p.sort(w),i.sort(w),c.sort(w),a=[...p,...i,...c]}return a},[A,ee,te,s.viewMode,s.sortOrder]),F=x.useMemo(()=>{if(s.itemsPerPage==="unlimited")return $;const a=typeof s.itemsPerPage=="number"?s.itemsPerPage:20,r=(o-1)*a,p=r+a;return $.slice(r,p)},[$,o,s.itemsPerPage]),g=x.useMemo(()=>{if(s.itemsPerPage==="unlimited")return 1;const a=typeof s.itemsPerPage=="number"?s.itemsPerPage:20;return Math.ceil($.length/a)},[$.length,s.itemsPerPage]);x.useEffect(()=>{o!==1&&(h(1),S.current&&S.current.scrollIntoView({behavior:"smooth",block:"start"}))},[s.selectedService,s.sortOrder,s.showZeroBytes,s.showSmallFiles,s.hideLocalhost,s.hideUnknownGames,s.viewMode,s.itemsPerPage]);const R=a=>{a!==o&&(h(a),S.current&&S.current.scrollIntoView({behavior:"smooth",block:"start"}))},se=a=>{u(!0);try{const r=$;let p="",i="",c="";const n=`lancache_downloads_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}`;if(a==="csv"){const U=s.viewMode==="normal"||s.viewMode==="compact"?r.flatMap(T=>"downloads"in T?T.downloads:[T]):r;p=Oe(U),i=`${n}.csv`,c="text/csv"}else p=JSON.stringify(r,(T,W)=>W instanceof Set?Array.from(W):W,2),i=`${n}.json`,c="application/json";const v=new Blob([p],{type:c}),O=URL.createObjectURL(v),L=document.createElement("a");L.href=O,L.download=i,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(O)}catch(r){console.error("Export failed:",r)}finally{u(!1),N(!1)}},ae=a=>{P(y===a?null:a)};return j?e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx(K,{padding:"sm",className:"animate-pulse",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-[var(--theme-bg-tertiary)] rounded w-40"}),e.jsx("div",{className:"h-10 bg-[var(--theme-bg-tertiary)] rounded w-32"}),e.jsx("div",{className:"h-10 bg-[var(--theme-bg-tertiary)] rounded w-40"})]})})}),e.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(a=>e.jsx("div",{className:"h-16 bg-[var(--theme-bg-secondary)] rounded animate-pulse",style:{animationDelay:`${a*100}ms`},children:e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[e.jsx("div",{className:"h-6 w-16 bg-[var(--theme-bg-tertiary)] rounded"}),e.jsx("div",{className:"h-4 bg-[var(--theme-bg-tertiary)] rounded flex-1 max-w-[200px]"}),e.jsxs("div",{className:"ml-auto flex gap-3",children:[e.jsx("div",{className:"h-4 w-20 bg-[var(--theme-bg-tertiary)] rounded"}),e.jsx("div",{className:"h-4 w-12 bg-[var(--theme-bg-tertiary)] rounded"})]})]})},a))})]}):d.length===0?e.jsx(Z,{color:"blue",icon:e.jsx(ne,{className:"w-5 h-5"}),children:"No downloads recorded yet. Downloads will appear here as clients request content."}):e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs(K,{padding:"sm",className:"transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex sm:hidden items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-themed-primary",children:"Downloads"}),e.jsx("button",{onClick:()=>D(!k),className:"p-1.5 rounded hover:bg-themed-hover transition-colors",title:"Settings",children:e.jsx(ce,{size:18})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center flex-1 w-full sm:w-auto",children:[e.jsx(J,{options:ge,value:s.selectedService,onChange:a=>M({...s,selectedService:a}),className:"w-full sm:w-40"}),e.jsx(J,{options:ye,value:s.itemsPerPage==="unlimited"?"unlimited":s.itemsPerPage.toString(),onChange:a=>M({...s,itemsPerPage:a==="unlimited"?"unlimited":parseInt(a)}),className:"w-full sm:w-32"}),e.jsx(J,{options:[{value:"latest",label:"Date (Newest)"},{value:"oldest",label:"Date (Oldest)"},{value:"largest",label:"Size (Largest)"},{value:"smallest",label:"Size (Smallest)"},{value:"service",label:"By Service"}],value:s.sortOrder,onChange:a=>M({...s,sortOrder:a}),className:"w-full sm:w-40"})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 justify-end w-auto",children:[e.jsxs("div",{className:"flex rounded-lg bg-themed-tertiary p-1",children:[e.jsxs("button",{onClick:()=>M({...s,viewMode:"compact"}),className:`px-3 py-1.5 rounded-md transition-colors flex items-center gap-1 ${s.viewMode==="compact"?"bg-primary":"text-themed-secondary hover:text-themed-primary"}`,style:{color:s.viewMode==="compact"?"var(--theme-button-text)":void 0},title:"Compact View",children:[e.jsx(de,{size:16}),e.jsx("span",{className:"text-xs",children:"Compact"})]}),e.jsxs("button",{onClick:()=>M({...s,viewMode:"normal"}),className:`px-3 py-1.5 rounded-md transition-colors flex items-center gap-1 ${s.viewMode==="normal"?"bg-primary":"text-themed-secondary hover:text-themed-primary"}`,style:{color:s.viewMode==="normal"?"var(--theme-button-text)":void 0},title:"Normal View",children:[e.jsx(me,{size:16}),e.jsx("span",{className:"text-xs",children:"Normal"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>N(!l),className:"p-2 rounded hover:bg-themed-hover transition-colors",title:"Export Data",disabled:m||F.length===0,children:m?e.jsx(he,{className:"w-4 h-4 animate-spin"}):e.jsx(je,{size:18})}),l&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-themed-primary border z-50",style:{borderColor:"var(--theme-border-primary)"},children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>{se("json"),N(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-themed-hover transition-colors text-themed-secondary",children:"Export JSON"}),e.jsx("button",{onClick:()=>{se("csv"),N(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-themed-hover transition-colors text-themed-secondary",children:"Export CSV"})]})})]}),e.jsx("button",{onClick:()=>D(!k),className:"p-2 rounded hover:bg-themed-hover transition-colors",title:"Settings",children:e.jsx(ce,{size:18})})]})]}),e.jsxs("div",{className:"flex sm:hidden rounded-lg bg-themed-tertiary p-1",children:[e.jsx("button",{onClick:()=>M({...s,viewMode:"compact"}),className:`flex-1 px-2 py-1.5 rounded-md transition-colors ${s.viewMode==="compact"?"bg-primary":"text-themed-secondary"}`,style:{color:s.viewMode==="compact"?"var(--theme-button-text)":void 0},children:e.jsx(de,{size:16,className:"mx-auto"})}),e.jsx("button",{onClick:()=>M({...s,viewMode:"normal"}),className:`flex-1 px-2 py-1.5 rounded-md transition-colors ${s.viewMode==="normal"?"bg-primary":"text-themed-secondary"}`,style:{color:s.viewMode==="normal"?"var(--theme-button-text)":void 0},children:e.jsx(me,{size:16,className:"mx-auto"})})]})]}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t my-3 animate-fade-in",style:{borderColor:"var(--theme-border-secondary)"}}),e.jsxs("div",{className:"space-y-2 animate-slide-in-top",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.showZeroBytes,onChange:a=>M({...s,showZeroBytes:a.target.checked}),className:"themed-checkbox"}),e.jsx("span",{className:"text-sm text-themed-secondary",children:"Show metadata (0 bytes)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.showSmallFiles,onChange:a=>M({...s,showSmallFiles:a.target.checked}),className:"themed-checkbox"}),e.jsx("span",{className:"text-sm text-themed-secondary",children:"Show small files (< 1MB)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hideLocalhost,onChange:a=>M({...s,hideLocalhost:a.target.checked}),className:"themed-checkbox"}),e.jsx("span",{className:"text-sm text-themed-secondary",children:"Hide localhost (127.0.0.1)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hideUnknownGames,onChange:a=>M({...s,hideUnknownGames:a.target.checked}),className:"themed-checkbox"}),e.jsx("span",{className:"text-sm text-themed-secondary",children:"Hide unknown games"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.aestheticMode,onChange:a=>M({...s,aestheticMode:a.target.checked}),className:"themed-checkbox"}),e.jsx("span",{className:"text-sm text-themed-secondary",children:"Aesthetic mode"})]})]})]})]}),e.jsxs(Z,{color:"blue",icon:e.jsx(ne,{className:"w-5 h-5"}),children:[s.itemsPerPage!=="unlimited"&&`Page ${o} of ${g} - `,"Showing ",F.length," of ",$.length," groups (",A.length," ",A.length===1?"download":"downloads",")",A.length!==Q.length&&` of ${Q.length} total`,s.selectedService!=="all"&&` for ${s.selectedService}`]}),A.length===0&&f!=="live"&&e.jsx(Z,{color:"yellow",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"font-medium",children:"No downloads found in selected time range"}),e.jsxs("div",{className:"text-sm opacity-90",children:["The dashboard shows ",e.jsx("strong",{children:"active downloads"})," (currently in progress), while this list shows downloads that ",e.jsx("strong",{children:"started"}),' within the selected time period. Try switching to "Live" to see all downloads, or adjust your time range.']})]})}),e.jsxs("div",{className:"relative",ref:S,children:[H&&e.jsx("div",{className:"absolute inset-0 bg-[var(--theme-bg-primary)]/60 backdrop-blur-sm flex items-center justify-center z-10 rounded-lg transition-opacity duration-300",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 px-6 py-4 rounded-lg bg-[var(--theme-bg-secondary)] border shadow-xl",style:{borderColor:"var(--theme-border-primary)",animation:"slideUp 0.3s ease-out"},children:[e.jsx(he,{className:"w-6 h-6 animate-spin text-[var(--theme-primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--theme-text-primary)]",children:"Updating..."})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`transition-opacity duration-300 ${s.viewMode==="compact"?"opacity-100":"opacity-0 absolute inset-0 pointer-events-none"}`,children:s.viewMode==="compact"&&e.jsx(Le,{items:F,expandedItem:y,onItemClick:ae,aestheticMode:s.aestheticMode})}),e.jsx("div",{className:`transition-opacity duration-300 ${s.viewMode==="normal"?"opacity-100":"opacity-0 absolute inset-0 pointer-events-none"}`,children:s.viewMode==="normal"&&e.jsx(Ae,{items:F,expandedItem:y,onItemClick:ae,aestheticMode:s.aestheticMode})})]})]}),g>1&&s.itemsPerPage!=="unlimited"&&e.jsx("div",{className:"sticky bottom-0 mt-4 z-20",style:{backgroundColor:"var(--theme-bg-primary)",paddingTop:"8px",paddingBottom:"8px",boxShadow:"0 -4px 12px rgba(0,0,0,0.1)"},children:e.jsx(K,{padding:"sm",className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--theme-text-primary)"},children:["Page ",o," of ",g]}),e.jsxs("span",{className:"text-sm",style:{color:"var(--theme-text-secondary)"},children:[(o-1)*(typeof s.itemsPerPage=="number"?s.itemsPerPage:20)+1," - ",Math.min(o*(typeof s.itemsPerPage=="number"?s.itemsPerPage:20),$.length)," of ",$.length," items"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(1),disabled:o===1,className:"p-2 rounded-lg transition-all hover:scale-105 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100",style:{backgroundColor:"var(--theme-bg-secondary)",color:"var(--theme-text-primary)",border:"1px solid var(--theme-border-primary)"},title:"First page","aria-label":"Go to first page",children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:()=>R(Math.max(1,o-1)),disabled:o===1,className:"p-2 rounded-lg transition-all hover:scale-105 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100",style:{backgroundColor:"var(--theme-bg-secondary)",color:"var(--theme-text-primary)",border:"1px solid var(--theme-border-primary)"},title:"Previous page","aria-label":"Go to previous page",children:e.jsx(Se,{size:16})}),e.jsx("div",{className:"flex items-center gap-1 px-2",children:g<=7?Array.from({length:g},(a,r)=>r+1).map(a=>e.jsx("button",{onClick:()=>R(a),className:`min-w-[32px] h-8 px-2 rounded-lg font-medium transition-all hover:scale-105 ${o===a?"shadow-md":"hover:bg-opacity-80"}`,style:{backgroundColor:o===a?"var(--theme-primary)":"var(--theme-bg-tertiary)",color:o===a?"var(--theme-button-text)":"var(--theme-text-primary)",border:o===a?"1px solid var(--theme-primary)":"1px solid var(--theme-border-secondary)"},"aria-label":`Go to page ${a}`,"aria-current":o===a?"page":void 0,children:a},a)):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(1),className:`min-w-[32px] h-8 px-2 rounded-lg font-medium transition-all hover:scale-105 ${o===1?"shadow-md":"hover:bg-opacity-80"}`,style:{backgroundColor:o===1?"var(--theme-primary)":"var(--theme-bg-tertiary)",color:o===1?"var(--theme-button-text)":"var(--theme-text-primary)",border:o===1?"1px solid var(--theme-primary)":"1px solid var(--theme-border-secondary)"},"aria-label":"Go to page 1","aria-current":o===1?"page":void 0,children:"1"}),o>3&&e.jsx("span",{className:"px-2",style:{color:"var(--theme-text-muted)"},children:"•••"}),Array.from({length:5},(a,r)=>{const p=o-2+r;return p<=1||p>=g?null:e.jsx("button",{onClick:()=>R(p),className:`min-w-[32px] h-8 px-2 rounded-lg font-medium transition-all hover:scale-105 ${o===p?"shadow-md":"hover:bg-opacity-80"}`,style:{backgroundColor:o===p?"var(--theme-primary)":"var(--theme-bg-tertiary)",color:o===p?"var(--theme-button-text)":"var(--theme-text-primary)",border:o===p?"1px solid var(--theme-primary)":"1px solid var(--theme-border-secondary)"},"aria-label":`Go to page ${p}`,"aria-current":o===p?"page":void 0,children:p},p)}).filter(Boolean),o<g-2&&e.jsx("span",{className:"px-2",style:{color:"var(--theme-text-muted)"},children:"•••"}),e.jsx("button",{onClick:()=>R(g),className:`min-w-[32px] h-8 px-2 rounded-lg font-medium transition-all hover:scale-105 ${o===g?"shadow-md":"hover:bg-opacity-80"}`,style:{backgroundColor:o===g?"var(--theme-primary)":"var(--theme-bg-tertiary)",color:o===g?"var(--theme-button-text)":"var(--theme-text-primary)",border:o===g?"1px solid var(--theme-primary)":"1px solid var(--theme-border-secondary)"},"aria-label":`Go to page ${g}`,"aria-current":o===g?"page":void 0,children:g})]})}),e.jsx("button",{onClick:()=>R(Math.min(g,o+1)),disabled:o===g,className:"p-2 rounded-lg transition-all hover:scale-105 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100",style:{backgroundColor:"var(--theme-bg-secondary)",color:"var(--theme-text-primary)",border:"1px solid var(--theme-border-primary)"},title:"Next page","aria-label":"Go to next page",children:e.jsx(q,{size:16})}),e.jsx("button",{onClick:()=>R(g),disabled:o===g,className:"p-2 rounded-lg transition-all hover:scale-105 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100",style:{backgroundColor:"var(--theme-bg-secondary)",color:"var(--theme-text-primary)",border:"1px solid var(--theme-border-primary)"},title:"Last page","aria-label":"Go to last page",children:e.jsx(Ce,{size:16})}),g>10&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-l mx-2 h-6",style:{borderColor:"var(--theme-border-secondary)"}}),e.jsxs("select",{value:o,onChange:a=>R(parseInt(a.target.value)),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--theme-bg-secondary)",color:"var(--theme-text-primary)",border:"1px solid var(--theme-border-primary)"},"aria-label":"Jump to page",children:[e.jsx("option",{value:"",disabled:!0,children:"Jump to..."}),Array.from({length:g},(a,r)=>r+1).map(a=>e.jsxs("option",{value:a,children:["Page ",a]},a))]})]})]})]})})}),s.itemsPerPage==="unlimited"&&F.length>500&&e.jsxs(Z,{color:"yellow",icon:e.jsx(ke,{className:"w-5 h-5"}),children:["Loading ",F.length," items. Consider using pagination for better performance."]})]})};export{Ve as default};
//# sourceMappingURL=DownloadsTab-CY6ro0Vv.js.map
